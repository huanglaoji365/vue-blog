# 测试数据初始化脚本

这个脚本用于初始化MongoDB数据库，创建测试用户、分类、文章和评论数据。

## 使用方法

### 1. 确保MongoDB已启动

确保你的MongoDB服务已经启动，并且可以连接。

### 2. 配置环境变量

在 `backend` 目录下创建 `.env` 文件（参考 `env.example`）：

```bash
# 复制环境变量示例文件
cp env.example .env

# 编辑 .env 文件，设置你的MongoDB连接字符串
MONGODB_URI=mongodb://localhost:27017/vue-blog
```

### 3. 运行测试数据初始化脚本

```bash
# 进入backend目录
cd backend

# 运行测试数据初始化脚本
npm run init-data
```

或者直接运行：

```bash
node scripts/init-test-data.js
```

## 创建的测试数据

### 用户数据

1. **管理员用户**
   - 邮箱: `admin@example.com`
   - 密码: `admin123`
   - 角色: `admin`

2. **编辑用户**
   - 邮箱: `editor@example.com`
   - 密码: `editor123`
   - 角色: `editor`

3. **普通用户1**
   - 邮箱: `user1@example.com`
   - 密码: `user123`
   - 角色: `user`

4. **普通用户2**
   - 邮箱: `user2@example.com`
   - 密码: `user123`
   - 角色: `user`

### 分类数据

1. **技术分享** - 分享最新的技术动态和开发经验
2. **生活随笔** - 记录生活中的点滴感悟
3. **学习笔记** - 学习过程中的心得体会
4. **项目展示** - 个人项目的展示和介绍

### 文章数据

创建了5篇测试文章：

1. **Vue3 组合式API详解** - 技术分享类文章
2. **Node.js 性能优化实践** - 技术分享类文章
3. **MongoDB 数据库设计最佳实践** - 技术分享类文章
4. **我的第一个Vue项目** - 生活随笔类文章
5. **学习JavaScript的心得体会** - 学习笔记类文章

### 评论数据

为文章创建了相应的测试评论。

## 注意事项

- 脚本会清空现有数据库中的所有数据
- 确保在运行脚本前备份重要数据
- 脚本会自动创建用户密码的哈希值
- 所有文章都设置为已发布状态

## 故障排除

如果遇到连接问题，请检查：

1. MongoDB服务是否已启动
2. 连接字符串是否正确
3. 网络连接是否正常
4. 防火墙设置是否允许连接

如果遇到权限问题，请确保：

1. MongoDB用户有足够的权限
2. 数据库名称是否正确
3. 认证信息是否正确
